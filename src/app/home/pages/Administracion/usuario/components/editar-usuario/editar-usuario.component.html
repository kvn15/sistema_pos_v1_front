<div class="modal-header">
  <h5 class="modal-title" id="modalCenterTitle">Editar Usuario</h5>
  <button
    type="button"
    class="btn-close" (click)="modal.dismiss()"></button>
</div>
<div class="modal-body">
  <div class="row">
    <div class="col-md-6 col-lg-4 mb-3">
      <label for="nombre" class="form-label">Nombre *</label>
      <input
        type="text"
        id="nombre"
        class="form-control"
        placeholder="Ingrese Nombre"
        autocomplete="off"
        [formControl]="frmNombre"
        />
    </div>
    <div class="col-md-6 col-lg-4 mb-3">
      <label for="usuario" class="form-label">Usuario *</label>
      <input
        type="text"
        id="usuario"
        class="form-control"
        placeholder="Ingrese Usuario"
        autocomplete="off"
        [formControl]="frmUsuario" />
    </div>
    <div class="col-md-6 col-lg-4 mb-3">
      <label for="email" class="form-label">Correo Electronico *</label>
      <input
        type="email"
        id="email"
        class="form-control"
        placeholder="Ingrese Correo"
        [formControl]="frmCorreo" />
    </div>
    <div class="col-md-6 col-lg-4 mb-3">
      <label for="role" class="form-label">Escoger Rol *</label>
      <select id="role" class="form-select" (change)="fnChangeRoles($event.target)"
      [formControl]="frmRole">
        <option value="">-</option>
        <option [value]="role.id" *ngFor="let role of listaRoles">{{role.rol_name}}</option>
      </select>
    </div>
    <div class="col-md-6 col-lg-4 mb-3">
      <label for="password" class="form-label">Nueva Contraseña *</label>
      <input
        type="password"
        id="password"
        class="form-control"
        placeholder="***********"
        autocomplete="off"
        [formControl]="frmPassword"/>
    </div>
    <div class="col-md-6 col-lg-4 mb-3">
      <label for="confirm_password" class="form-label">Confirmar Contraseña *</label>
      <input
        type="password"
        id="confirm_password"
        class="form-control"
        placeholder="***********"
        autocomplete="off"
        [formControl]="frmConfirmPassword"/>
    </div>
    <div class="col">
      <label class="form-label">Subir Foto</label>
      <div class="d-flex align-items-start align-items-sm-center gap-4">
        <img
          [src]="imagen_previsualiza"
          alt="user-avatar"
          class="d-block rounded"
          height="100"
          width="100"
          id="uploadedAvatar" />
        <div class="button-wrapper">
          <label for="upload" class="btn btn-primary me-2 mb-4" tabindex="0">
            <span class="d-none d-sm-block">Subir nueva foto</span>
            <i class="bx bx-upload d-block d-sm-none"></i>
            <input
              type="file"
              id="upload"
              class="account-file-input"
              hidden
              accept="image/png, image/jpeg" (change)="fnProcesarImagen($event)"/>
          </label>

          <p class="text-muted mb-0">Solo archivos JPG o PNG. Tamaño maxímo 4MB</p>
        </div>
      </div>
    </div>
  </div>
  <hr>
  <div class="row">
    <div class="col-md-6 col-lg-4" [formGroup]="formPermisos">
      <ng-container formArrayName="array_form">
        <table class="table table-striped table-borderless">
          <thead>
            <tr>
              <th class="text-nowrap">Permisos</th>
              <th class="text-nowrap text-center">Asignar</th>
            </tr>
          </thead>
          <tbody>
            <ng-container *ngFor="let item of getArrayPermisos.controls;let i = index">
              <tr [formGroupName]="i">
                <td class="text-nowrap">{{ item.value.name_permission }}</td>
                <td>
                  <div class="form-check d-flex justify-content-center">
                    <input class="form-check-input" type="checkbox" formControlName="bEscogio">
                  </div>
                </td>
              </tr>
            </ng-container>
          </tbody>
        </table>
      </ng-container>
    </div>
  </div>
</div>
<div class="modal-footer">
  <button type="button" class="btn btn-outline-secondary" (click)="modal.dismiss()">
    Cancelar
  </button>
  <button type="submit" class="btn btn-primary" (click)="fnGuardarUsuario()">Guardar</button>
</div>
